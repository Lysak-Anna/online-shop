{"version":3,"file":"static/js/188.c80797d3.chunk.js","mappings":"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","sources":["components/Modal/Modal.styled.js","components/Modal/Modal.jsx","helpers/toUpperCase.js","pages/ProductDetailPage/ProductDetailPage.jsx"],"sourcesContent":["import styled from \"@emotion/styled\";\nimport { GrFormClose } from \"react-icons/gr\";\nimport { Link } from \"react-router-dom\";\n\nexport const StyledLink = styled(Link)`\n  color: #9615db;\n`;\nexport const Button = styled.button`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  border: transparent;\n  background-color: transparent;\n  color: #2d3032;\n  cursor: pointer;\n`;\nexport const CloseButton = styled(GrFormClose)`\n  width: 20px;\n  height: 20px;\n`;\nexport const Overlay = styled.div`\n  height: 100vh;\n  width: 100vw;\n  background-color: rgba(0, 0, 0, 0.4);\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nexport const Content = styled.div`\n  position: relative;\n  padding: 40px 20px;\n  border-radius: 4px;\n  background-color: white;\n`;\nexport const Text = styled.p`\n  font-size: 18px;\n  font-weight: 500;\n`;\n","import { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport {\n  Button,\n  CloseButton,\n  Content,\n  Overlay,\n  StyledLink,\n  Text,\n} from \"./Modal.styled\";\nconst modalRoot = document.querySelector(\"#modal-root\");\nexport default function Modal({ setIsActive }) {\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  });\n  function handleKeyDown(event) {\n    if (event.code === \"Escape\") {\n      setIsActive(false);\n    }\n  }\n  function handleBackdropClick(event) {\n    if (event.currentTarget === event.target) {\n      setIsActive(false);\n    }\n  }\n  return createPortal(\n    <Overlay onClick={handleBackdropClick}>\n      <Content>\n        <Button type=\"button\" onClick={() => setIsActive(false)}>\n          <CloseButton />\n        </Button>\n        <Text>\n          Please, <StyledLink to=\"/login\">sign in</StyledLink> to add products\n          to cart\n        </Text>\n      </Content>\n    </Overlay>,\n    modalRoot\n  );\n}\n","export default function firstLetterToUpperCase(text) {\n  let firstWord = text.replace(/ .*/, \"\");\n  const firstLetter = firstWord.slice(0, 1).toUpperCase();\n  firstWord = firstLetter + firstWord.slice(1);\n  text = text.replace(/[^\\s]*/, firstWord);\n  return text;\n}\n","import { useLocation, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useQuery } from 'react-query';\nimport { getProductDetailById } from '../../API/productsAPI';\nimport { addProduct } from '../../redux/cart/cartSlice';\nimport { isLoggedIn } from '../../redux/user/selectors';\nimport Modal from '../../components/Modal/Modal';\nimport firstLetterToUpperCase from '../../helpers/toUpperCase';\nimport {\n  Container,\n  Descr,\n  Rating,\n  Title,\n  Cart,\n  FlexContainer,\n  BackArrow,\n  BackLink,\n  ImageWrapper,\n} from './ProductDetailPage.styled';\n\nexport default function ProductDetailPage() {\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const { productId } = useParams();\n  const [product, setProduct] = useState(null);\n  const [modal, setModal] = useState(false);\n  const isUserLoggedIn = useSelector(isLoggedIn);\n  const { isError } = useQuery(['product', productId], async () => {\n    const { data } = await getProductDetailById(productId);\n    setProduct(data);\n  });\n  const backLinkHref = location.state?.from ?? '/';\n  const onClickHandler = ({ title, price, id }) => {\n    if (!isUserLoggedIn) {\n      setModal(true);\n    } else {\n      dispatch(addProduct({ title, price, id }));\n    }\n  };\n\n  if (!product) {\n    return null;\n  }\n  const { title, price, description, id, image, rating } = product;\n\n  return (\n    <>\n      {isError &&\n        toast.error('Something went wrong... Please try again in few minutes')}\n      <Container>\n        <BackLink to={backLinkHref}>\n          <BackArrow /> Back\n        </BackLink>\n\n        <Title>{title}</Title>\n        <FlexContainer>\n          <ImageWrapper>\n            <img src={image} alt={title}></img>\n          </ImageWrapper>\n          <div>\n            <Descr>{firstLetterToUpperCase(description)}</Descr>\n\n            <Rating>Rating: {rating.rate}</Rating>\n            <FlexContainer>\n              <Rating>Price: {price}</Rating>\n              <Cart onClick={() => onClickHandler({ title, price, id })} />\n\n              {modal && <Modal setIsActive={setModal} />}\n            </FlexContainer>\n          </div>\n        </FlexContainer>\n      </Container>\n    </>\n  );\n}\n"],"names":["StyledLink","styled","Link","_templateObject","_taggedTemplateLiteral","Button","_templateObject2","CloseButton","GrFormClose","_templateObject3","Overlay","_templateObject4","Content","_templateObject5","Text","_templateObject6","modalRoot","document","querySelector","Modal","_ref","setIsActive","handleKeyDown","event","code","useEffect","window","addEventListener","removeEventListener","createPortal","_jsx","onClick","currentTarget","target","children","_jsxs","type","to","firstLetterToUpperCase","text","firstWord","replace","firstLetter","slice","toUpperCase","ProductDetailPage","_location$state$from","_location$state","location","useLocation","dispatch","useDispatch","productId","useParams","_useState","useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","modal","setModal","isUserLoggedIn","useSelector","isLoggedIn","isError","useQuery","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$getProductDeta","data","wrap","_context","prev","next","getProductDetailById","sent","stop","backLinkHref","state","from","title","price","description","id","image","rating","_Fragment","toast","Container","BackLink","BackArrow","Title","FlexContainer","ImageWrapper","src","alt","Descr","Rating","rate","Cart","_ref2","addProduct","onClickHandler"],"sourceRoot":""}